<Window x:Class="DeviveModelManager.View"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Device Model Generator" Height="800" Width="1200">
    <StackPanel Orientation="Vertical">
        <StackPanel Orientation="Horizontal" Height="50" Background="Gray">
            <Button Content="Создать модель устройств" Command="{Binding GenarateCommand}" Margin="5" Padding="5" Background="YellowGreen" Foreground="White" FontSize="15" />
            <TextBlock Text="Версия" VerticalAlignment="Center" Foreground="White" />
            <TextBox Text="{Binding Version}" Margin="5" Height="20" Width="100" />
        </StackPanel>
        <Grid Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <StackPanel HorizontalAlignment="Left" Grid.Column="0">
                <TreeView Name="treeView" ItemsSource="{Binding Devices}"
                  SelectedItemChanged="treeView_SelectedItemChanged"
                  Background="Transparent"
                  BorderThickness="0"
                      Height="700">

                    <TreeView.ItemContainerStyle>
                        <Style>
                            <Setter Property="TreeViewItem.IsExpanded" Value="True"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=Type}" Value="menu">
                                    <Setter Property="TreeViewItem.IsSelected" Value="True"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TreeView.ItemContainerStyle>

                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
                            <StackPanel>
                                <TextBlock Text="{Binding Name}"
                               Background="Transparent"
                               FontSize="12"
                               FontWeight="Bold"
                               FontFamily="Verdana">
                                </TextBlock>
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

            </StackPanel>

            <StackPanel Grid.Column="1" DataContext="{Binding SelectedDevice}">
                <TextBox Text="{Binding Name}" Margin="2" />
                <TextBox Text="{Binding Clsid}" Margin="2" />
                <TextBlock Text="{Binding ModelInfoXml}" />

                <StackPanel DataContext="{Binding Driver}">
                    <ItemsControl ItemsSource="{Binding state}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding name}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </StackPanel>
        </Grid>
    </StackPanel>
</Window>
