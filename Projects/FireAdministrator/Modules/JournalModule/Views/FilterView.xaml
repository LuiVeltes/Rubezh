<UserControl x:Class="FiltersModule.Views.FilterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:FiltersModule.Converters"
             xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase">
    <UserControl.Resources>
        <SolidColorBrush x:Key="headerBrush">OrangeRed</SolidColorBrush>
        <SolidColorBrush x:Key="borderBrush">Silver</SolidColorBrush>
        
        <Converters:EventsToStringConverter x:Key="EventsToStringConverter" />
        <Converters:CategoriesToStringConverter x:Key="CategoriesToStringConverter" />

        <CollectionViewSource x:Key="SortedFilters" Source="{Binding FilterViewModels}">
            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="JournalFilter.Name" Direction="Ascending" />
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
    </UserControl.Resources>
    <DockPanel Margin="10, 20">
        
        <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" Text="Для удобства, в оперативной задаче предусмотрена возможность раздельного представления событий разного типа. Список, приведенный ниже, отображается в виде отдельных закладок в окне журнала оперативной задачи." />
        <TextBlock DockPanel.Dock="Top"  Text="" />
        <TextBlock DockPanel.Dock="Top" Margin="5, 0"  Text="Представления фильтров журнала:" Foreground="{StaticResource headerBrush}" />
        
        <!--<DockPanel  DockPanel.Dock="Right" Margin="5" LastChildFill="False">
            <Button DockPanel.Dock="Top" Margin="0, 0, 0, 5" Command="{Binding CreateCommand}">Создать</Button>
            <Button DockPanel.Dock="Top" Margin="0, 0, 0, 5" Command="{Binding EditCommand}">Изменить</Button>
            <Button DockPanel.Dock="Top" Command="{Binding RemoveCommand}">Удалить</Button>
        </DockPanel>-->

        <ListBox ItemsSource="{Binding Source={StaticResource SortedFilters}}" SelectedItem="{Binding SelectedFilter}"
                 HorizontalContentAlignment="Stretch">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Padding="5" BorderBrush="{StaticResource borderBrush}" BorderThickness="3">
                        <StackPanel Orientation="Horizontal">
                            <StackPanel>
                                <StackPanel.Resources>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="Foreground" Value="{StaticResource headerBrush}" />
                                        <Setter Property="FontWeight" Value="Black" />
                                    </Style>
                                </StackPanel.Resources>
                                <TextBlock Text="Наименование: " Margin="2" />
                                <TextBlock Text="Тип события: " Margin="2" />
                                <TextBlock Text="Тип устройства: " Margin="2" />
                                <TextBlock Text="Выбрать записи: " Margin="2" />
                            </StackPanel>
                            <TextBlock Name="textBlock">
                            <StackPanel DataContext="{Binding JournalFilter}" >
                                <TextBlock Text="{Binding Name}"
                                           Margin="2" />
                                <TextBlock Text="{Binding Events, Converter={StaticResource EventsToStringConverter}}" 
                                           Margin="2" />
                                <TextBlock Text="{Binding Categories, Converter={StaticResource CategoriesToStringConverter}}" 
                                           Margin="2" />
                                <WrapPanel Margin="2">
                                    <WrapPanel>
                                        <TextBlock Text="{Binding LastRecordsCount}" />
                                        <TextBlock Text=" последних" />
                                    </WrapPanel>
                                    <WrapPanel Visibility="{Binding IsLastDaysCountActive, Converter={StaticResource BoolToVisibilityConverter}}">
                                        <TextBlock Text=" за " />
                                        <TextBlock Text="{Binding LastDaysCount}" />
                                        <TextBlock Text=" дней" />
                                    </WrapPanel>
                                </WrapPanel>
                            </StackPanel>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        
    </DockPanel>
</UserControl>
