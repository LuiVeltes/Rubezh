<UserControl x:Class="SKDModule.Views.ZonesView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:Controls="clr-namespace:Controls;assembly=Controls"
			 xmlns:Conv="clr-namespace:Controls.Converters;assembly=Controls"
			 xmlns:Converters="clr-namespace:SKDModule.Converters"
			 xmlns:drag="clr-namespace:Infrastructure.Common.Services.DragDrop;assembly=Infrastructure.Common"
			 xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls"
			 xmlns:viewModel="clr-namespace:SKDModule.ViewModels"
			 xmlns:Views="clr-namespace:SKDModule.Views">

	<UserControl.Resources>
		<ContextMenu x:Key="ZoneContextMenu">
			<Controls:IconedMenuItem Command="{Binding AddCommand}" ImageSource="/Controls;component/Images/BAdd.png" Text="Добавить дочернюю зону (Ctrl+N)" />
			<Controls:IconedMenuItem Command="{Binding AddToParentCommand}" ImageSource="/Controls;component/Images/BAddChild.png" Text="Добавить к родительской зоне (Ctrl+M)" />
			<Controls:IconedMenuItem Command="{Binding DeleteCommand}" ImageSource="/Controls;component/Images/BDelete.png" Text="Удалить (Ctrl+Del)" />
			<Controls:IconedMenuItem Command="{Binding EditCommand}" ImageSource="/Controls;component/Images/BSettings.png" Text="Редактировать" />
		</ContextMenu>
	</UserControl.Resources>

	<XDataGrid Focusable="True" ItemsSource="{Binding Zones}" SelectedItem="{Binding SelectedZone}">
		<DataGrid.Resources>
				<Style x:Key="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}" TargetType="TextBox">
					<Setter Property="MinWidth" Value="0" />
					<Setter Property="MinHeight" Value="0" />
				</Style>
		</DataGrid.Resources>
		<DataGrid.Columns>
			<DataGridTemplateColumn Header="Зона" Width="*">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<DockPanel ContextMenu="{StaticResource ZoneContextMenu}">
							<Controls:EditorPresenter>
								<Controls:EditorPresenter.ViewTemplate>
									<ControlTemplate>
										<StackPanel Orientation="Horizontal">
											<Image Margin="1 0 2 0" Source="{Binding VisualizationState, Converter={StaticResource VisualizationStateToImageSourceConverter}}" />
											<Image Margin="1 0 0 0" VerticalAlignment="Center" Source="/Controls;component/Images/zone.png" />
											<TextBlock Margin="2" VerticalAlignment="Center" Text="{Binding Name}" />
										</StackPanel>
									</ControlTemplate>
								</Controls:EditorPresenter.ViewTemplate>
							</Controls:EditorPresenter>
						</DockPanel>
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>

			<DataGridTemplateColumn Header="Примечание" Width="*">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<Controls:EditorPresenter>
							<Controls:EditorPresenter.ViewTemplate>
								<ControlTemplate>
									<TextBlock Text="{Binding Description}" />
								</ControlTemplate>
							</Controls:EditorPresenter.ViewTemplate>
						</Controls:EditorPresenter>
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>
		</DataGrid.Columns>
	</XDataGrid>
</UserControl>