<UserControl x:Class="AutomationModule.Views.VariableDetailsView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:automation="clr-namespace:FiresecAPI.Automation;assembly=FiresecAPI"
			 xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
			 MinWidth="650" MinHeight="400">
	<TabControl>
		<TabItem Header="Основные">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition />
					<ColumnDefinition Width="5" />
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>

				<DataGrid Grid.Column="0" Grid.RowSpan="2" ItemsSource="{Binding ExplicitTypes}" SelectedItem="{Binding SelectedExplicitType}">
					<DataGrid.Columns>
						<DataGridTextColumn Header="Тип" Binding="{Binding Name}" Width="*" />
					</DataGrid.Columns>
				</DataGrid>

				<StackPanel Orientation="Vertical" Grid.Column="2" Grid.Row="0" HorizontalAlignment="Stretch">

					<StackPanel Orientation="Horizontal" Margin="2" HorizontalAlignment="Right" Height="28">
						<Label Content="Имя" />
						<TextBox Text= "{Binding Name, UpdateSourceTrigger=PropertyChanged}" Margin="2" Width="200"/>
					</StackPanel>

					<StackPanel Orientation="Horizontal" Margin="2" HorizontalAlignment="Right" Height="28">
						<Label Content="Список" HorizontalAlignment="Left" />
						<CheckBox Width="202" IsChecked="{Binding IsList}" HorizontalAlignment="Right" Margin="2, 7, 0, 0" />
					</StackPanel>

					<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Object}}" HorizontalAlignment="Right" Height="28">
						<Label Content="Тип" />
						<ComboBox ItemsSource="{Binding ObjectTypes}" SelectedItem="{Binding SelectedObjectType}" Width="200" Margin="2"
								  IsEnabled="{Binding DataContext.IsEditMode, Converter={StaticResource InverseBooleanConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}">
							<ComboBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
								</DataTemplate>
							</ComboBox.ItemTemplate>
						</ComboBox>
					</StackPanel>

					<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Enum}}" HorizontalAlignment="Right" Height="28">
						<Label Content="Тип" />
						<ComboBox ItemsSource="{Binding EnumTypes}" SelectedItem="{Binding SelectedEnumType}" Width="200" Margin="2"
								  IsEnabled="{Binding DataContext.IsEditMode, Converter={StaticResource InverseBooleanConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}">
							<ComboBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
								</DataTemplate>
							</ComboBox.ItemTemplate>
						</ComboBox>
					</StackPanel>

					<StackPanel Visibility="{Binding IsList, Converter={StaticResource InversedBoolToVisibilityConverter}}">
						<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Integer}}" HorizontalAlignment="Right" Height="28">
							<Label Content="Значение" />
							<extToolkit:IntegerUpDown Width="200" Value="{Binding CurrentVariableItem.IntValue, UpdateSourceTrigger=PropertyChanged}" Margin="2" />
						</StackPanel>

						<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter}, 
						ConverterParameter={x:Static automation:ExplicitType.Boolean}}" HorizontalAlignment="Right" Height="28">
							<Label Content="Значение" HorizontalAlignment="Left" />
							<CheckBox IsChecked="{Binding CurrentVariableItem.BoolValue, UpdateSourceTrigger=PropertyChanged}" Width="202" Margin="2,7,0,0" />
						</StackPanel>

						<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.String}}" HorizontalAlignment="Right" Height="28">
							<Label Content="Значение" />
							<TextBox Text="{Binding CurrentVariableItem.StringValue, UpdateSourceTrigger=PropertyChanged}" VerticalContentAlignment="Center" Width="200" Margin="2" />
						</StackPanel>

						<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.DateTime}}" HorizontalAlignment="Right" Height="28"  >
							<Label Content="Значение" />
							<extToolkit:DateTimePicker Value = "{Binding CurrentVariableItem.DateTimeValue, UpdateSourceTrigger=PropertyChanged}" Width="200" Margin="2" />
						</StackPanel>

						<StackPanel Orientation="Horizontal" Margin="2" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Enum}}" HorizontalAlignment="Right" Height="28"  >
							<ComboBox ItemsSource="{Binding CurrentVariableItem.StateClassValues}" SelectedItem="{Binding CurrentVariableItem.StateClassValue}" Width="200" Margin="2"
									  Visibility="{Binding Path=SelectedEnumType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.StateClass}}">
								<ComboBox.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
									</DataTemplate>
								</ComboBox.ItemTemplate>
							</ComboBox>
							<ComboBox ItemsSource="{Binding CurrentVariableItem.DeviceTypes}" SelectedItem="{Binding CurrentVariableItem.DeviceType}" Width="200" Margin="2"
									  Visibility="{Binding Path=SelectedEnumType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.DeviceType}}">
								<ComboBox.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding .}" />
									</DataTemplate>
								</ComboBox.ItemTemplate>
							</ComboBox>
						</StackPanel>

						<StackPanel Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Object}}">
							<TextBlock Margin="0,7,0,0"  HorizontalAlignment="Right" VerticalAlignment="Top">
							<Hyperlink Command="{Binding SelectCommand}" Style="{StaticResource HyperlinkStyle}">
								<TextBlock Text="{Binding CurrentVariableItem.PresentationName}" Visibility="{Binding CurrentVariableItem.IsEmpty, Converter={StaticResource InversedBoolToVisibilityConverter}}"/>
								<TextBlock Text="Нажмите для выбора объекта">
									<TextBlock.Style>
										<Style>
											<Setter Property="TextBlock.Visibility" Value="Collapsed" />
											<Style.Triggers>
												<DataTrigger Binding="{Binding CurrentVariableItem.IsEmpty}" Value="True">
													<Setter Property="TextBlock.Visibility" Value="Visible" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</TextBlock.Style>
								</TextBlock>
							</Hyperlink>
						</TextBlock>
						</StackPanel>
					</StackPanel>
				</StackPanel>

				<Grid Height="Auto" Grid.Column="2" Grid.Row="1" Margin="2" Visibility="{Binding IsList, Converter={StaticResource BoolToVisibilityConverter}}">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition />
					</Grid.RowDefinitions>
					<ToolBarButton Grid.Row="0" HorizontalAlignment="Left" Command="{Binding AddCommand}" ImageSource="/Controls;component/Images/Add.png" ToolTip="Добавить объект" Height="32" Width="32" />
					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Object}}">
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<DockPanel>
										<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
										<TextBlock Margin="0,7,0,0"  HorizontalAlignment="Right" VerticalAlignment="Top">
											<Hyperlink  Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.ChangeItemCommand}" CommandParameter="{Binding}" Style="{StaticResource HyperlinkStyle}">
												<TextBlock Text="{Binding PresentationName}" Visibility="{Binding IsEmpty, Converter={StaticResource InversedBoolToVisibilityConverter}}"/>
												<TextBlock Text="Нажмите для выбора объекта">
													<TextBlock.Style>
														<Style>
															<Setter Property="TextBlock.Visibility" Value="Collapsed" />
															<Style.Triggers>
																<DataTrigger Binding="{Binding IsEmpty}" Value="True">
																	<Setter Property="TextBlock.Visibility" Value="Visible" />
																</DataTrigger>
															</Style.Triggers>
														</Style>
													</TextBlock.Style>
												</TextBlock>
											</Hyperlink>
										</TextBlock>
									</DockPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Boolean}}">
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<DockPanel>
										<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
										<CheckBox IsChecked="{Binding BoolValue}" Margin="0,7,0,0"  HorizontalAlignment="Right" VerticalAlignment="Top" />
									</DockPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.DateTime}}">
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<DockPanel>
										<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
										<extToolkit:DateTimePicker Value = "{Binding DateTimeValue, UpdateSourceTrigger=PropertyChanged}" Width="200" Margin="2" HorizontalAlignment="Right" />
									</DockPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Integer}}">
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<DockPanel>
										<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
										<extToolkit:IntegerUpDown Width="200" Value="{Binding IntValue, UpdateSourceTrigger=PropertyChanged}" Margin="2" HorizontalAlignment="Right" />
									</DockPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.String}}">
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<DockPanel>
										<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
										<TextBox Text="{Binding StringValue, UpdateSourceTrigger=PropertyChanged}" Width="200" Margin="2" HorizontalAlignment="Right" VerticalContentAlignment="Center" />
									</DockPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

					<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Visibility="{Binding Path=SelectedExplicitType.ExplicitType, Converter={StaticResource EnumToVisibilityConverter},
						ConverterParameter={x:Static automation:ExplicitType.Enum}}" >
						<ItemsControl ItemsSource="{Binding VariableItems}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<StackPanel>
										<DockPanel Visibility="{Binding Path=DataContext.SelectedEnumType, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.StateClass}}">
											<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
											<ComboBox ItemsSource="{Binding StateClassValues}" SelectedItem="{Binding StateClassValue}" Width="200" Margin="2" HorizontalAlignment="Right" >
												<ComboBox.ItemTemplate>
													<DataTemplate>
														<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
													</DataTemplate>
												</ComboBox.ItemTemplate>
											</ComboBox>
										</DockPanel>
										<DockPanel Visibility="{Binding Path=DataContext.SelectedEnumType, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.DeviceType}}">
											<ToolBarButton ToolTip="Удалить объект" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
											Path=DataContext.RemoveCommand}" CommandParameter="{Binding}" ImageSource="/Controls;component/Images/deleteCross.png" Height="28" Width="28" Background="DarkGray" />
											<ComboBox ItemsSource="{Binding DeviceTypes}" SelectedItem="{Binding DeviceType}" Width="200" Margin="2" HorizontalAlignment="Right">
												<ComboBox.ItemTemplate>
													<DataTemplate>
														<TextBlock Text="{Binding .}" />
													</DataTemplate>
												</ComboBox.ItemTemplate>
											</ComboBox>
										</DockPanel>
									</StackPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>

				</Grid>
			</Grid>
		</TabItem>
	</TabControl>
</UserControl>