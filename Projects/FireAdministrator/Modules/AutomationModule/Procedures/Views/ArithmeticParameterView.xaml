<UserControl x:Class="AutomationModule.Views.ArithmeticParameterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:automation="clr-namespace:FiresecAPI.Automation;assembly=FiresecAPI"
			 xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended">
	<UserControl.Resources>
		<ResourceDictionary Source="Steps\ProcedureResources.xaml" />
	</UserControl.Resources>

	<StackPanel Orientation="Horizontal">
		<ComboBox ItemsSource="{Binding VariableTypes}" SelectedItem="{Binding SelectedVariableType, UpdateSourceTrigger=PropertyChanged}">
			<ComboBox.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
				</DataTemplate>
			</ComboBox.ItemTemplate>
		</ComboBox>

		<ComboBox ItemsSource="{Binding GlobalVariables}" SelectedItem="{Binding SelectedVariable, UpdateSourceTrigger=PropertyChanged}"
				  Visibility="{Binding Path=SelectedVariableType, Converter={StaticResource EnumToVisibilityConverter},
			ConverterParameter={x:Static automation:VariableType.IsGlobalVariable}}">
			<ComboBox.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding Name}" />
				</DataTemplate>
			</ComboBox.ItemTemplate>
		</ComboBox>

		<ComboBox ItemsSource="{Binding LocalVariables}" SelectedItem="{Binding SelectedVariable, UpdateSourceTrigger=PropertyChanged}"
				  Visibility="{Binding Path=SelectedVariableType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:VariableType.IsLocalVariable}}">
			<ComboBox.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding Name}" />
				</DataTemplate>
			</ComboBox.ItemTemplate>
		</ComboBox>

		<StackPanel Visibility="{Binding SelectedVariableType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:VariableType.IsValue}}">
			<extToolkit:IntegerUpDown Value="{Binding CurrentVariableItem.IntValue, UpdateSourceTrigger=PropertyChanged}"
					Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.Integer}}" />
			<CheckBox IsChecked="{Binding CurrentVariableItem.BoolValue, UpdateSourceTrigger=PropertyChanged}"
					Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.Boolean}}" />
			<TextBox Text="{Binding CurrentVariableItem.StringValue, UpdateSourceTrigger=PropertyChanged}"
					Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.String}}" />
			<extToolkit:DateTimePicker Value = "{Binding CurrentVariableItem.DateTimeValue, UpdateSourceTrigger=PropertyChanged}"
					Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.DateTime}}" />
			<StackPanel Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.Enum}}" >
				<ComboBox ItemsSource="{Binding CurrentVariableItem.StateClassValues}" SelectedItem="{Binding CurrentVariableItem.StateClassValue, UpdateSourceTrigger=PropertyChanged}"
				  Visibility="{Binding Path=EnumType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.StateClass}}">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
				<ComboBox ItemsSource="{Binding CurrentVariableItem.DeviceTypes}" SelectedItem="{Binding CurrentVariableItem.DeviceType, UpdateSourceTrigger=PropertyChanged}"
				  Visibility="{Binding Path=EnumType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:EnumType.DeviceType}}">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding .}" />
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
			</StackPanel>
			<TextBlock Margin="7,7,0,0" VerticalAlignment="Top" Visibility="{Binding ValueType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter={x:Static automation:ValueType.Object}}">
				<Hyperlink  Command="{Binding ChangeItemCommand}" CommandParameter="{Binding}" Style="{StaticResource HyperlinkStyle}">
					<TextBlock Text="{Binding CurrentVariableItem.PresentationName}" Visibility="{Binding CurrentVariableItem.IsEmpty, Converter={StaticResource InversedBoolToVisibilityConverter}}"/>
					<TextBlock Text="Нажмите для выбора объекта">
						<TextBlock.Style>
							<Style>
								<Setter Property="TextBlock.Visibility" Value="Collapsed" />
								<Style.Triggers>
									<DataTrigger Binding="{Binding CurrentVariableItem.IsEmpty}" Value="True">
										<Setter Property="TextBlock.Visibility" Value="Visible" />
									</DataTrigger>
								</Style.Triggers>
							</Style>
						</TextBlock.Style>
					</TextBlock>
				</Hyperlink>
			</TextBlock>
		</StackPanel>
	</StackPanel>
</UserControl>
