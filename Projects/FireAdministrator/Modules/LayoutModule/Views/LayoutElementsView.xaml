<UserControl x:Class="LayoutModule.Views.LayoutElementsView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Conv="clr-namespace:Controls.Converters;assembly=Controls" xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls" xmlns:xcad="http://schemas.xceed.com/wpf/xaml/avalondock">
	<UserControl.Resources>
		<Conv:SwitchConverter x:Key="Tooltip" Else="{x:Null}">
			<Conv:SwitchCase Then="Элемент может быть размещено" When="Multiple" />
			<Conv:SwitchCase Then="Элемент не размещен" When="NotPresent" />
			<Conv:SwitchCase Then="Элемент нельзя размещать" When="Prohibit" />
			<Conv:SwitchCase Then="Элемент уже размещен" When="Single" />
		</Conv:SwitchConverter>
	</UserControl.Resources>
	<tree:TreeList SelectedTreeNode="{Binding SelectedLayoutPart}" Source="{Binding LayoutParts}">
		<tree:TreeList.ItemContainerStyle>
			<Style BasedOn="{StaticResource {x:Type tree:TreeListItem}}" TargetType="{x:Type tree:TreeListItem}">
				<!--  <Setter Property="ContextMenu" Value="{StaticResource contextMenu}" />  -->
				<!--  <Setter Property="Controls:Attach.InputBindings" Value="{StaticResource inputCollection}" />  -->
				<Setter Property="Focusable" Value="True" />
			</Style>
		</tree:TreeList.ItemContainerStyle>
		<tree:TreeList.View>
			<GridView>
				<GridViewColumn Header="Элементы">
					<GridViewColumn.CellTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<xcad:DragSourceControl Width="16" Height="16" DragCommand="{Binding DragCommand}" ClickCommand="{Binding AddCommand}">
									<Image Source="{Binding VisualizationState, Converter={StaticResource VisualizationStateToImageSourceConverter}}" ToolTip="{Binding VisualizationState, Converter={StaticResource Tooltip}}" />
								</xcad:DragSourceControl>
								<Grid>
									<Grid.ToolTip>
										<ToolTip>
											<StackPanel Orientation="Vertical">
												<StackPanel Orientation="Horizontal">
													<Image Width="16" Height="16" Margin="2, 3, 5, 0" VerticalAlignment="Center" Source="{Binding IconSource, Converter={StaticResource NullToImageConverter}}" Visibility="{Binding IconSource, Converter={StaticResource NullToVisibilityConverter}}" />
													<TextBlock VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Name}" />
												</StackPanel>
												<TextBlock VerticalAlignment="Center" Text="{Binding Description}" />
											</StackPanel>
										</ToolTip>
									</Grid.ToolTip>
									<Image Width="16" Height="16" Margin="5, 0, 5, 0" HorizontalAlignment="Left" Source="{Binding IconSource, Converter={StaticResource NullToImageConverter}}" />
									<TextBlock x:Name="txt" Width="200" Margin="31 0 0 0" HorizontalAlignment="Stretch" VerticalAlignment="Center" Text="{Binding Name}" />
								</Grid>
							</StackPanel>
							<DataTemplate.Triggers>
								<DataTrigger Binding="{Binding IsPresented}" Value="False">
									<Setter TargetName="txt" Property="FontWeight" Value="Bold" />
								</DataTrigger>
							</DataTemplate.Triggers>
						</DataTemplate>
					</GridViewColumn.CellTemplate>
				</GridViewColumn>
			</GridView>
		</tree:TreeList.View>
	</tree:TreeList>
</UserControl>
