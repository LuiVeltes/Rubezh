<UserControl x:Class="GKModule.Views.DelaysView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:Controls="clr-namespace:Controls;assembly=Controls">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="0" />
		</Grid.RowDefinitions>
		<Grid Grid.Row="0">
			<Controls:XDataGrid Grid.Column="0" ItemsSource="{Binding Delays}" SelectedItem="{Binding SelectedDelay}" CanUserSortColumns="True">
				<DataGrid.Columns>
					<DataGridTemplateColumn Header="№" SortMemberPath="Delay.No" Width="Auto" CanUserResize="False">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image Source="/Controls;component/Images/Delay.png" Width="16" Margin="2 0 0 0" />
									<TextBlock Text="{Binding Delay.No}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="2 0" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn Header="Наименование" SortMemberPath="Delay.Name" Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="{Binding Delay.Name}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="2" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn Header="Задержка" Width="Auto">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding Delay.DelayTime}" Margin="2" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn Header="Удержание" Width="Auto">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding Delay.Hold}" Margin="2" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn Header="Режим" Width="Auto">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding Delay.DelayRegime, Converter={StaticResource DelayRegimeToStringConverter}}" Margin="2" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn Header="Логика включения" Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock MinWidth="100" VerticalAlignment="Center" Cursor="Hand" Text="{Binding PresentationLogic}" TextWrapping="NoWrap">
									<TextBlock.Style>
										<Style TargetType="TextBlock">
											<Style.Triggers>
												<DataTrigger Binding="{Binding IsZoneGrayed}" Value="True">
													<Setter Property="TextBlock.Foreground" Value="Gray" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</TextBlock.Style>
									<TextBlock.InputBindings>
										<MouseBinding Command="{Binding ShowLogicCommand}" MouseAction="LeftClick" />
									</TextBlock.InputBindings>
									<TextBlock.ToolTip>
										<WrapPanel>
											<TextBlock Text="{Binding PresentationLogic}" TextWrapping="Wrap" />
										</WrapPanel>
									</TextBlock.ToolTip>
								</TextBlock>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</Controls:XDataGrid>
		</Grid>
		<Border Grid.Row="1" CornerRadius="5" Background="White" Margin="0 4 0 0">
			<Grid Visibility="{Binding HasSelectedDelay, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding SelectedDelay}" Margin="2">
				</StackPanel>
			</Grid>
		</Border>
	</Grid>
</UserControl>