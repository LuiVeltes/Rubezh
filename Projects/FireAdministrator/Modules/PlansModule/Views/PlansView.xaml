<UserControl x:Class="PlansModule.Views.PlansView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Views="clr-namespace:PlansModule.Views">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Views:ToolboxView Grid.Row="0" />
        <Grid Grid.Row="1" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" MinWidth="200" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="3*" MinWidth="200" />
            </Grid.ColumnDefinitions>

            <TabControl Grid.Column="0">
                <TabItem Header="Планы">
                    <Views:PlansTreeView />
                </TabItem>
                <TabItem Header="Устройства">
                    <Views:DevicesView DataContext="{Binding DevicesViewModel}" />
                </TabItem>
                <TabItem Header="Слои" Visibility="{Binding SelectedPlan, Converter={StaticResource NullToVisibilityConverter}}">
                    <Views:ElementsView DataContext="{Binding ElementsViewModel}" />
                </TabItem>
            </TabControl>
            
            <GridSplitter Grid.Column="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="5" Background="Transparent" Cursor="SizeWE" />
            <Border Grid.Column="2" CornerRadius="5" Padding="5" Background="{DynamicResource BackgroundBrush}">
                <Views:PlanDesignerView Visibility="{Binding SelectedPlan, Converter={StaticResource NullToVisibilityConverter}}" />
            </Border>
        </Grid>
    </Grid>
</UserControl>