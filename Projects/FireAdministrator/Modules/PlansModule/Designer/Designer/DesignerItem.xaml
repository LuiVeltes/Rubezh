<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:loc="clr-namespace:PlansModule.Designer">

	<ResourceDictionary.MergedDictionaries>
		<ResourceDictionary Source="pack://application:,,,/PlansModule;component/Designer/Rectangle/ResizeChromeRectangle.xaml" />
	</ResourceDictionary.MergedDictionaries>

	<ControlTemplate x:Key="MoveThumbRectangleTemplate" TargetType="{x:Type loc:MoveThumb}">
		<Rectangle Fill="Transparent" />
	</ControlTemplate>

	<ControlTemplate x:Key="MoveThumbPolygonTemplate" TargetType="{x:Type loc:MoveThumb}">
		<Polygon DataContext="{Binding Content}" Fill="Transparent" Points="{Binding Points}" />
	</ControlTemplate>

	<ControlTemplate x:Key="MoveThumbPolylineTemplate" TargetType="{x:Type loc:MoveThumb}">
		<Polyline DataContext="{Binding Content}"
		          Fill="Transparent" Opacity="0.01"
		          Points="{Binding Points}"
		          Stroke="White" StrokeThickness="10" />
	</ControlTemplate>

	<Style TargetType="{x:Type loc:DesignerItem}">
		<Setter Property="SnapsToDevicePixels" Value="true" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type loc:DesignerItem}">
					<Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=.}">
						<Grid Name="PART_Adorners">
							<loc:MoveThumb x:Name="PART_MoveThumbRectangle" Cursor="SizeAll" Template="{StaticResource MoveThumbRectangleTemplate}" Visibility="Visible" />
							<loc:MoveThumb x:Name="PART_MoveThumbRectanglePolygon" Cursor="SizeAll" Template="{StaticResource MoveThumbPolygonTemplate}" Visibility="Collapsed" />
							<loc:MoveThumb x:Name="PART_MoveThumbRectanglePolyline" Cursor="SizeAll" Template="{StaticResource MoveThumbPolylineTemplate}" Visibility="Collapsed" />
							<loc:ResizeDecoratorRectangle x:Name="PART_ResizeDecoratorRectangle" Visibility="Visible" />
							<loc:ResizeDecoratorPolygon x:Name="PART_ResizeDecoratorPolygon" Visibility="Collapsed" />
							<loc:ResizeDecoratorPolyline x:Name="PART_ResizeDecoratorPolyline" Visibility="Collapsed" />
						</Grid>
						<ContentPresenter x:Name="PART_ContentPresenter" Content="{TemplateBinding DataContext}" />
						<Grid.ContextMenu>
							<ContextMenu>
								<MenuItem Command="{Binding AddPointCommand}" Header="Добавить точку" Visibility="{Binding IsPolygon, Converter={StaticResource BoolToVisibilityConverter}}" />
								<MenuItem Command="{Binding AddPointCommand}" Header="Добавить точку" Visibility="{Binding IsPolyline, Converter={StaticResource BoolToVisibilityConverter}}" />
								<MenuItem Command="{Binding DeleteCommand}" Header="Удалить" />
								<MenuItem Command="{Binding ShowPropertiesCommand}" Header="Свойства" />
							</ContextMenu>
						</Grid.ContextMenu>
					</Grid>

					<ControlTemplate.Triggers>
						<Trigger Property="IsSelectable" Value="False">
							<Setter TargetName="PART_Adorners" Property="Visibility" Value="Collapsed" />
						</Trigger>
						<Trigger Property="IsSelected" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="ShowDecorator" Value="True" />
							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="ShowDecorator" Value="True" />
							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="ShowDecorator" Value="True" />
						</Trigger>
						<!--<Trigger Property="IsPolygon" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectangle" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="Visibility" Value="Visible" />
							<Setter TargetName="PART_MoveThumbRectanglePolygon" Property="Visibility" Value="Visible" />

							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectanglePolyline" Property="Visibility" Value="Collapsed" />
						</Trigger>
						<Trigger Property="IsPolyline" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectangle" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectanglePolygon" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="Visibility" Value="Visible" />
							<Setter TargetName="PART_MoveThumbRectanglePolyline" Property="Visibility" Value="Visible" />
						</Trigger>-->
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<!--<Style TargetType="{x:Type loc:_DesignerItem}">
		<Setter Property="SnapsToDevicePixels" Value="true" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type loc:DesignerItem}">
					<Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=.}">
						<Grid Name="PART_Adorners">
							<loc:MoveThumb x:Name="PART_MoveThumbRectangle" Cursor="SizeAll" Template="{StaticResource MoveThumbRectangleTemplate}" Visibility="Visible" />
							<loc:MoveThumb x:Name="PART_MoveThumbRectanglePolygon" Cursor="SizeAll" Template="{StaticResource MoveThumbPolygonTemplate}" Visibility="Collapsed" />
							<loc:MoveThumb x:Name="PART_MoveThumbRectanglePolyline" Cursor="SizeAll" Template="{StaticResource MoveThumbPolylineTemplate}" Visibility="Collapsed" />
							<loc:ResizeDecoratorRectangle x:Name="PART_ResizeDecoratorRectangle" Visibility="Visible" />
							<loc:ResizeDecoratorPolygon x:Name="PART_ResizeDecoratorPolygon" Visibility="Collapsed" />
							<loc:ResizeDecoratorPolyline x:Name="PART_ResizeDecoratorPolyline" Visibility="Collapsed" />
						</Grid>
						<ContentPresenter x:Name="PART_ContentPresenter" Content="{TemplateBinding ContentControl.Content}" />
						<Grid.ContextMenu>
							<ContextMenu>
								<MenuItem Command="{Binding AddPointCommand}" Header="Добавить точку" Visibility="{Binding IsPolygon, Converter={StaticResource BoolToVisibilityConverter}}" />
								<MenuItem Command="{Binding AddPointCommand}" Header="Добавить точку" Visibility="{Binding IsPolyline, Converter={StaticResource BoolToVisibilityConverter}}" />
								<MenuItem Command="{Binding DeleteCommand}" Header="Удалить" />
								<MenuItem Command="{Binding ShowPropertiesCommand}" Header="Свойства" />
							</ContextMenu>
						</Grid.ContextMenu>
					</Grid>

					<ControlTemplate.Triggers>
						<Trigger Property="IsSelectable" Value="False">
							<Setter TargetName="PART_Adorners" Property="Visibility" Value="Collapsed" />
						</Trigger>
						<Trigger Property="IsSelected" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="ShowDecorator" Value="True" />
							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="ShowDecorator" Value="True" />
							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="ShowDecorator" Value="True" />
						</Trigger>
						<Trigger Property="IsPolygon" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectangle" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="Visibility" Value="Visible" />
							<Setter TargetName="PART_MoveThumbRectanglePolygon" Property="Visibility" Value="Visible" />

							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectanglePolyline" Property="Visibility" Value="Collapsed" />
						</Trigger>
						<Trigger Property="IsPolyline" Value="True">
							<Setter TargetName="PART_ResizeDecoratorRectangle" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectangle" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolygon" Property="Visibility" Value="Collapsed" />
							<Setter TargetName="PART_MoveThumbRectanglePolygon" Property="Visibility" Value="Collapsed" />

							<Setter TargetName="PART_ResizeDecoratorPolyline" Property="Visibility" Value="Visible" />
							<Setter TargetName="PART_MoveThumbRectanglePolyline" Property="Visibility" Value="Visible" />
						</Trigger>
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>-->

</ResourceDictionary>