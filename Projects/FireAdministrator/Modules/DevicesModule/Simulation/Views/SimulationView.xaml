<UserControl x:Class="DevicesModule.Views.SimulationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:DevicesModule.Converters">
    <UserControl.Resources>
        <Converters:xxxConverter x:Key="xxxConverter" />
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="200" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" MinWidth="200" />
        </Grid.ColumnDefinitions>
        <DataGrid Grid.Column="0" ItemsSource="{Binding Zones}" SelectedItem="{Binding SelectedZone}">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Зона" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Zone.PresentationName}" Margin="5 0 0 0" Background="{Binding ZoneState, Converter={StaticResource ZoneLogicStateToColorConverter}}"
                                       Foreground="{Binding ZoneState, Converter={StaticResource ZoneLogicStateToColorConverter}}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Background" Value="{Binding ZoneState, Converter={StaticResource ZoneLogicStateToColorConverter}}" />
                                    </Style>
                                </TextBlock.Style>
                                <TextBlock.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Пожар" Command="{Binding SetFireCommand}" />
                                        <MenuItem Header="Норма" Command="{Binding SetNormCommand}" />
                                    </ContextMenu>
                                </TextBlock.ContextMenu>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Зона" Binding="{Binding Zone.PresentationName}" />
            </DataGrid.Columns>
            <DataGrid.CellStyle>
                <Style TargetType="{x:Type DataGridCell}">
                    <Setter Property="Background" Value="{Binding StateType, Converter={StaticResource StateTypeToColorConverter}}" />
                </Style>
            </DataGrid.CellStyle>
        </DataGrid>
        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" Cursor="SizeWE" />
        <TextBlock Grid.Column="2" Text="{Binding xxx}" Background="{Binding xxx, Converter={StaticResource xxxConverter}}" />
        <DataGrid Grid.Column="3" DataContext="{Binding SelectedZone}" ItemsSource="{Binding Devices}" SelectedItem="{Binding SelectedDevice}">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Устройство" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Image Width="16" Height="16" Margin="5, 0, 5, 0" HorizontalAlignment="Left" Source="{Binding Device.Driver.ImageSource}" />
                                <TextBlock Margin="31 0 0 0" HorizontalAlignment="Stretch" VerticalAlignment="Center" Text="{Binding Device.Driver.ShortName}">
                                    <TextBlock.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Включить" />
                                            <MenuItem Header="Выключить" />
                                        </ContextMenu>
                                    </TextBlock.ContextMenu>
                                </TextBlock>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Адрес" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Device.PresentationAddress}" Margin="5 0 0 0" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>