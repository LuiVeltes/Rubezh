<UserControl x:Class="GKModule.Views.DevicesView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Controls="clr-namespace:Controls;assembly=Controls" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls" xmlns:Views="clr-namespace:GKModule.Views">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="1000*" MinHeight="200" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" MinHeight="100" />
		</Grid.RowDefinitions>
		<Grid Grid.Row="0" ScrollViewer.IsDeferredScrollingEnabled="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
			<tree:TreeList Name="_devicesDataGrid" Focusable="True" SelectedTreeNode="{Binding SelectedDevice}" Source="{Binding RootDevices}">
				<tree:TreeList.View>
					<GridView>
						<GridViewColumn Width="250" Header="Устройство">
							<GridViewColumn.CellTemplate>
								<DataTemplate>
									<Views:DeviceView />
								</DataTemplate>
							</GridViewColumn.CellTemplate>
						</GridViewColumn>
						<GridViewColumn Width="75" DisplayMemberBinding="{Binding Device.PresentationAddress}" Header="Адрес" />
						<GridViewColumn Width="300" Header="Зона или Логика">
							<GridViewColumn.CellTemplate>
								<DataTemplate>
									<TextBlock HorizontalAlignment="Stretch" Text="{Binding PresentationZone}" ToolTip="{Binding PresentationZone}">
										<TextBlock.Resources>
											<Style TargetType="ToolTip">
												<Style.Triggers>
													<Trigger Property="Content" Value="{x:Static sys:String.Empty}">
														<Setter Property="Visibility" Value="Collapsed" />
													</Trigger>
													<Trigger Property="Content" Value="{x:Null}">
														<Setter Property="Visibility" Value="Collapsed" />
													</Trigger>
												</Style.Triggers>
											</Style>
										</TextBlock.Resources>
									</TextBlock>
								</DataTemplate>
							</GridViewColumn.CellTemplate>
						</GridViewColumn>
						<GridViewColumn Width="100" DisplayMemberBinding="{Binding Device.Description}" Header="Примечание" />
					</GridView>
				</tree:TreeList.View>
			</tree:TreeList>
		</Grid>
		<GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" Cursor="SizeNS" />
		<Border Grid.Row="2" Margin="0, 5, 0, 0" Background="{DynamicResource BackgroundBrush}" BorderThickness="0" CornerRadius="5" DataContext="{Binding SelectedDevice}" Padding="5" TextBlock.FontSize="11" TextBlock.Foreground="White">
			<ScrollViewer VerticalScrollBarVisibility="Auto">
				<StackPanel>
					<TextBlock FontWeight="Bold" Foreground="Orange" Text="{Binding Device.PresentationDriverAndAddress}" />
					<Views:DeviceStateView TextElement.Foreground="White" />
				</StackPanel>
			</ScrollViewer>
		</Border>
	</Grid>
</UserControl>