<UserControl x:Class="VideoModule.RVI_VSS.Views.ArchiveView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:extToolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended"
             xmlns:rviVss="clr-namespace:Infrastructure.Common.Video.RVI_VSS;assembly=Infrastructure.Common"
             MinWidth="800" MinHeight="500">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height ="120" />
                <RowDefinition Height="*" />
                <RowDefinition Height ="Auto" />
            </Grid.RowDefinitions>
            <Grid Grid.Row ="0">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Margin="2">Устройство:</Label>
                        <ComboBox ItemsSource="{Binding Cameras}" SelectedItem="{Binding SelectedCamera}" DisplayMemberPath="Address" Margin="2" />
                        <Label Margin="2">Канал:</Label>
                        <ComboBox DataContext="{Binding SelectedDevice}" ItemsSource="{Binding Channels}" SelectedItem="{Binding SelectedChannel}" DisplayMemberPath="Name" Margin="2" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                        <Label Margin="2, 0, 0, 0">С</Label>
                        <extToolkit:DateTimePicker Value="{Binding DateTimeFrom}" Margin="8, 0, 0, 0"/>
                    </StackPanel >
                    <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                        <Label Margin="2, 0, 0, 0">По</Label>
                        <extToolkit:DateTimePicker Value="{Binding DateTimeTo}" Margin="2, 0, 0, 0" />
                        <Button Content="Поиск" Command="{Binding SearchCommand}" Width="100" Margin="20, 0, 0, 0" />
                    </StackPanel>
                </StackPanel>
            </Grid>
            <DataGrid Grid.Row="1" ItemsSource="{Binding Records}" SelectedItem="{Binding SelectedRecord}">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding CoupledChannel.ChannelNumber}" Header="SN" />
                    <DataGridTextColumn Binding="{Binding NetRecordFileInfo.StartTime}" Header="Время начала" />
                    <DataGridTextColumn Binding="{Binding NetRecordFileInfo.EndTime}" Header="Время окончания" />
                    <DataGridTextColumn Binding="{Binding NetRecordFileInfo.Size}" Header="Объем(Kb)" />
                    <DataGridTextColumn Binding="{Binding CoupledChannel.Name}" Header="Тип записи" Width="1*" />
                </DataGrid.Columns>
            </DataGrid>
            <Button Grid.Row="2" Content="Воспроизвести" Command="{Binding StartCommand}" HorizontalAlignment="Right" />
        </Grid>
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="400"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <rviVss:CellPlayerWrap DataContext="{Binding ArchivePlayer}" Grid.Row="0" />
        </Grid>
    </Grid>
</UserControl>
