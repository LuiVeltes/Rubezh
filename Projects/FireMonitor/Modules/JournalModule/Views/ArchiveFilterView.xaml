<UserControl x:Class="JournalModule.Views.ArchiveFilterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:JournalModule.Converters"
             xmlns:extToolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit.Extended"
             MinWidth="500"
             MinHeight="350">
    <UserControl.Resources>
        <Converters:StateTypeToEventNameConverter x:Key="StateTypeToEventNameConverter" />
    </UserControl.Resources>
    <DockPanel Margin="10">
        <StackPanel DockPanel.Dock="Top">
            <TextBlock Margin="2" Text="Временной диапазон:" />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Margin="5"
                               VerticalAlignment="Center"
                               Text="С" />
                    <DatePicker Margin="2" SelectedDate="{Binding StartDate}" />
                    <extToolkit:TimePicker Margin="2" Value="{Binding StartTime}" />
                </StackPanel>
                <StackPanel Grid.Column="1"
                            HorizontalAlignment="Stretch"
                            Orientation="Horizontal">
                    <TextBlock Margin="5"
                               VerticalAlignment="Center"
                               Text="До" />
                    <DatePicker Margin="2" SelectedDate="{Binding EndDate}" />
                    <extToolkit:TimePicker Margin="2" Value="{Binding EndTime}" />
                </StackPanel>
            </Grid>
            <CheckBox Margin="2,2,2,15"
                      Content="Использовать дату регистрации события в системе (иначе дату возникновения)"
                      IsChecked="{Binding UseSystemDate}" />
        </StackPanel>
        <Grid Margin="0,5,0,0" DockPanel.Dock="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Button Grid.Column="0"
                    Width="100"
                    Margin="2"
                    HorizontalAlignment="Left"
                    Command="{Binding ClearCommand}"
                    Content="Очистить" />
            <StackPanel Grid.Column="1"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                <Button Width="100"
                        Margin="2"
                        Command="{Binding SaveCommand}"
                        Content="Ok"
                        IsDefault="True" />
                <Button Width="100"
                        Margin="2"
                        Command="{Binding CancelCommand}"
                        Content="Отмена" />
            </StackPanel>
        </Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Row="0"
                       Grid.Column="0"
                       Margin="2"
                       Text="Классы событий" />
            <TextBlock Grid.Row="0"
                       Grid.Column="1"
                       Margin="2"
                       Text="События" />
            <ListBox Grid.Row="1"
                     Grid.Column="0"
                     ItemsSource="{Binding JournalTypes,
                                           Converter={StaticResource CollectionViewFactoryConverter},
                                           ConverterParameter=Id}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <WrapPanel>
                            <CheckBox Margin="2"
                                      Checked="CheckBox_Checked"
                                      IsChecked="{Binding IsEnable}"
                                      IsThreeState="True"
                                      Unchecked="CheckBox_Checked" />
                            <TextBlock Margin="2" Text="{Binding Id, Converter={StaticResource StateTypeToEventNameConverter}}" />
                        </WrapPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <ListBox Grid.Row="1"
                     Grid.Column="1"
                     ItemsSource="{Binding JournalEvents,
                                           Converter={StaticResource CollectionViewFactoryConverter},
                                           ConverterParameter=ClassId}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <WrapPanel>
                            <CheckBox Margin="2"
                                      Checked="CheckBox_Checked_1"
                                      IsChecked="{Binding IsEnable}"
                                      Unchecked="CheckBox_Checked_1" />
                            <TextBlock Margin="2" Text="{Binding Name}" />
                        </WrapPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </DockPanel>
</UserControl>