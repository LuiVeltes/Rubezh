<UserControl x:Class="ReportsModule.Views.SKDReportPresenterView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing" xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon">
	<UserControl.Resources>
		<dxp:DisabledCommand x:Key="disabledCommand" />
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<Grid Grid.Row="0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>
			<StackPanel Grid.Column="0" Orientation="Horizontal">
				<ToolBarButton Command="{Binding ChangeFilterCommand}" ImageSource="/Controls;component/Images/Filter.png" ToolTip="Задать фильтр" />
				<ToolBarButton ImageSource="/Controls;component/Images/Refresh.png" ToolTip="Обновить отчет" />
				<ToolBarButton Command="{Binding Model.FirstPageCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" ImageSource="/Controls;component/Images/LeftLeft.png" ToolTip="Начальная страница" />
				<ToolBarButton Command="{Binding Model.PreviousPageCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" ImageSource="/Controls;component/Images/Left.png" ToolTip="Предыдущая страница" />
				<TextBox Height="30" MinWidth="25" MinHeight="25" HorizontalContentAlignment="Center" VerticalContentAlignment="Stretch" FontSize="20" Text="{Binding Model.CurrentPageNumber, ElementName=viewer, UpdateSourceTrigger=Explicit}" />
				<Label VerticalContentAlignment="Center" Content="/" FontSize="20" />
				<Label VerticalContentAlignment="Center" Content="{Binding Model.PageCount, ElementName=viewer, FallbackValue='0'}" FontSize="20" />
				<ToolBarButton Command="{Binding Model.NextPageCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" ImageSource="/Controls;component/Images/Right.png" ToolTip="Следующая страница" />
				<ToolBarButton Command="{Binding Model.LastPageCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" ImageSource="/Controls;component/Images/RightRight.png" ToolTip="Последняя страница" />
				<ToolBarButton Command="{Binding FitPageSizeCommand}" CommandParameter="{x:Static dxp:ZoomFitMode.PageWidth}" ImageSource="/Controls;component/Images/WidthToPage.png" ToolTip="По ширине страницы" />
				<ToolBarButton Command="{Binding FitPageSizeCommand}" CommandParameter="{x:Static dxp:ZoomFitMode.PageHeight}" ImageSource="/Controls;component/Images/HeightToPage.png" ToolTip="По высоте страницы" />
				<ToolBarButton Command="{Binding FitPageSizeCommand}" CommandParameter="{x:Static dxp:ZoomFitMode.WholePage}" ImageSource="/Controls;component/Images/FidthToPage.png" ToolTip="Исходный размер" />
			</StackPanel>
			<DockPanel Grid.Column="1">
				<ToolBarButton Command="{Binding Model.ZoomOutCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" DockPanel.Dock="Left" ImageSource="/Controls;component/Images/ZoomOut.png" ToolTip="Уменьшить масштаб" />
				<ToolBarButton Command="{Binding Model.ZoomInCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" DockPanel.Dock="Right" ImageSource="/Controls;component/Images/ZoomIn.png" ToolTip="Увеличить масштаб" />
				<Slider x:Name="slider" VerticalAlignment="Center" IsSnapToTickEnabled="True" Maximum="500" Minimum="10" Orientation="Horizontal" TickFrequency="10" ToolTip="Изменить масштаб" Value="{Binding Model.Zoom, ElementName=viewer}" />
			</DockPanel>
			<StackPanel Grid.Column="2" Orientation="Horizontal">
				<ToolBarButton Command="{Binding Model.PrintCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" ImageSource="/Controls;component/Images/Print.png" ToolTip="Печать отчета" />
				<ToolBarButton Command="{Binding Model.ExportCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" CommandParameter="Csv" ImageSource="/Controls;component/Images/Pdf.png" ToolTip="Экспорт в CSV" />
			</StackPanel>
		</Grid>

		<dxp:DocumentViewer x:Name="viewer" Grid.Row="1" Model="{Binding Model}" />

		<Grid Grid.Row="2" Margin="10,3,3,3">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="30" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>
			<StackPanel Grid.Column="0" Orientation="Vertical">
				<TextBlock FontWeight="Bold" Foreground="White" Text="Фильтр: По умолчанию" />
				<TextBlock FontWeight="Bold" Foreground="White" Text="За последнюю неделю" />
			</StackPanel>
			<ProgressBar Grid.Column="2" Width="150" Height="15" VerticalAlignment="Center" VerticalContentAlignment="Center" IsIndeterminate="True" Visibility="{Binding Model.ProgressVisibility, ElementName=viewer, FallbackValue=Collapsed, Converter={StaticResource BoolToVisibilityConverter}}" />
			<Button Grid.Column="3" VerticalAlignment="Center" VerticalContentAlignment="Center" Command="{Binding Model.StopCommand, ElementName=viewer, FallbackValue={StaticResource disabledCommand}}" Visibility="{Binding IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel Margin="3" Orientation="Horizontal">
					<Image Width="16" Height="16" Source="{dxp:PrintingResourceImage ResourceName=Images/BarItems/Stop_16x16.png}" />
					<TextBlock Foreground="White" Text="{dxp:PrintingStringId StringId=StopPageBuilding}" />
				</StackPanel>
			</Button>
			<TextBlock Grid.Column="5" Foreground="White" Text="{Binding Model.ZoomDisplayText, ElementName=viewer}" VerticalAlignment="Center"/>
		</Grid>
	</Grid>
</UserControl>
