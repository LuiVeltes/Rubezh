<UserControl x:Class="SKDModule.Views.HolidaysView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<StackPanel Grid.Row="0" Orientation="Horizontal">
			<ComboBox ItemsSource="{Binding AvailableYears}" SelectedItem="{Binding SelectedYear}">
				<ComboBox.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding Year}" />
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>
			<StackPanel DataContext="{Binding SelectedYear}" Orientation="Horizontal">
				<StackPanel DataContext="{Binding SelectedOrganisationHoliday}" Orientation="Horizontal">
					<ToolBarButton Command="{Binding AddCommand}" ImageSource="/Controls;component/Images/Add.png" ToolTip="Добавить" />
					<ToolBarButton Command="{Binding EditCommand}" ImageSource="/Controls;component/Images/Edit.png" ToolTip="Редактировать" />
					<ToolBarButton Command="{Binding DeleteCommand}" ImageSource="/Controls;component/Images/Delete.png" ToolTip="Удалить" />
					<ToolBarButton Command="{Binding ShowSettingsCommand}" ImageSource="/Controls;component/Images/Settings.png" ToolTip="Настройки" />
				</StackPanel>
				<ToolBarButton Command="{Binding RefreshCommand}" ImageSource="/Controls;component/Images/Refresh.png" ToolTip="Обновить" />
			</StackPanel>
		</StackPanel>

		<TabControl Name="tabControl" Grid.Row="1" BorderThickness="0" DataContext="{Binding SelectedYear}" ItemsSource="{Binding OrganisationHolidays}" SelectedItem="{Binding SelectedOrganisationHoliday}">
			<TabControl.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding Organisation.Name}" />
				</DataTemplate>
			</TabControl.ItemTemplate>
			<TabControl.ContentTemplate>
				<DataTemplate>
					<XDataGrid ItemsSource="{Binding ViewModels}" SelectedItem="{Binding SelectedViewModel}">
						<DataGrid.Columns>
							<DataGridTemplateColumn Width="*" Header="Наименование">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<StackPanel Orientation="Horizontal">
											<Image Margin="1 0 0 0" VerticalAlignment="Center" Source="/Controls;component/Images/zone.png" />
											<TextBlock Margin="2" VerticalAlignment="Center" Text="{Binding Model.Name}" />
										</StackPanel>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
							<DataGridTemplateColumn Width="*" Header="Дата">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Path=Model.Date, StringFormat=dd-MM}" />
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
							<DataGridTemplateColumn Width="*" Header="Тип">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Model.Type, Converter={StaticResource EnumToDescriptionConverter}}" />
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
							<DataGridTemplateColumn Width="*" Header="Величина сокращения">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding ReductionTime}" />
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
							<DataGridTemplateColumn Width="*" Header="Дата переноса">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding TransitionDate}" />
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</XDataGrid>
				</DataTemplate>
			</TabControl.ContentTemplate>

			<TabControl.ItemContainerStyle>
				<Style TargetType="{x:Type TabItem}">
					<Setter Property="Background" Value="{x:Null}" />
					<Setter Property="Visibility" Value="{Binding ElementName=tabControl, Path=Items.Count, Converter={StaticResource CountToVisibilityConverter}}" />
					<Setter Property="Template" Value="{StaticResource TabItemStyle}" />
				</Style>
			</TabControl.ItemContainerStyle>
		</TabControl>
	</Grid>
</UserControl>