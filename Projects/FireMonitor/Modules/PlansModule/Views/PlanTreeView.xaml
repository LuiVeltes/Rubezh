<UserControl x:Class="PlansModule.Views.PlanTreeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:Controls.Converters;assembly=Controls"
             xmlns:LacalConverters="clr-namespace:PlansModule.Converters"
             xmlns:Controls="clr-namespace:Controls;assembly=Controls">
    <UserControl.Resources>
        <Converters:StateTypeToIconConverter x:Key="StateTypeToIconConverter" />
        <Converters:StateTypeToStringConverter x:Key="StateTypeToStringConverter" />
        <LacalConverters:StateTypeToPlanColorConverter x:Key="StateTypeToPlanColorConverter" />
    </UserControl.Resources>

	<Controls:TreeListView ItemsSource="{Binding Plans}" SelectedObject="{Binding SelectedPlan}">
		<Controls:TreeListView.Columns>
			<GridViewColumn Header="Название">
				<GridViewColumn.CellTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
							<Image Source="{Binding StateType, Converter={StaticResource StateTypeToIconConverter}}" Width="16" Height="16" VerticalAlignment="Center" />
							<TextBlock Text="{Binding Plan.Caption}" ToolTip="{Binding StateType, Converter={StaticResource StateTypeToStringConverter}}" Background="{Binding StateType, Converter={StaticResource StateTypeToPlanColorConverter}}" Margin="2, 0, 0, 0" VerticalAlignment="Center" />
						</StackPanel>
					</DataTemplate>
				</GridViewColumn.CellTemplate>
			</GridViewColumn>
		</Controls:TreeListView.Columns>
	</Controls:TreeListView>

</UserControl>