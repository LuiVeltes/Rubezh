<UserControl x:Class="SKDModule.Views.TimeTrackDetailsView"
	         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:SKDModule.Converters"
	         MinWidth="900" MinHeight="800">
    <UserControl.Resources>
        <Converters:TimeSpanToStringConverter x:Key="TimeSpanToStringConverter" />
        <Converters:TimeSpanToColorConverter x:Key="TimeSpanToColorConverter" />
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TabControl Margin="2">
            <TabItem Header="Отчет">
                <DataGrid ItemsSource="{Binding DayTimeTrackParts}" Margin="2">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Зона" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Source="/Controls;component/Images/Zone.png" VerticalAlignment="Center" Margin="1 0 0 0" />
                                        <TextBlock Text="{Binding ZoneName}" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Вход" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding EnterTime}" Margin="4 2" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="Выход" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding ExitTime}" Margin="4 2" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            <TabItem Header="Документы">
                <Grid Margin="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <ToolBarButton Command="{Binding AddCommand}" ToolTip="Добавить документ" ImageSource="/Controls;component/Images/Add.png" />
                        <ToolBarButton Command="{Binding EditCommand}" ToolTip="Редактировать документ" ImageSource="/Controls;component/Images/Edit.png" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Documents}" SelectedItem="{Binding SelectedDocument}">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Название документа" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image Width="16" Source="/Controls;component/Images/Organisation.png" VerticalAlignment="Center"  Margin="2 0" />
                                            <TextBlock Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Код" Width="50">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ShortName}" Margin="2 0" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Начало" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding StartDateTime}" Margin="2 0" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Конец" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding EndDateTime}" Margin="2 0" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
        <Border Grid.Row="1" CornerRadius="2" Background="White" Margin="2 5">
            <StackPanel>
                <Grid Margin="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="По документу" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="2" />
                    <TextBlock Text="Фактически" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="2" />
                    <TextBlock Text="График" Grid.Row="2" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="2" />
                    <TextBlock Text="Итого" Grid.Row="3" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="2" />
                    <Grid Grid.Row="0" Grid.Column="1" Name="DocumentsGrid" Height="30" Margin="2" />
                    <Grid Grid.Row="1" Grid.Column="1" Name="RealGrid" Height="30" Margin="2" />
                    <Grid Grid.Row="2" Grid.Column="1" Name="PlannedGrid" Height="30" Margin="2" />
                    <Grid Grid.Row="3" Grid.Column="1" Name="CombinedGrid" Height="30" Margin="2" />
                    <Grid Grid.Row="4" Grid.Column="1" Name="TimeLineGrid" Height="30" Margin="2" />
                </Grid>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" HorizontalAlignment="Right">
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Всего" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="Gray" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.Total, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.Total, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Пропуск" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="Red" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalMissed, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalMissed, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="По графику" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="Green" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalInSchedule, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalInSchedule, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Переработка" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="Yellow" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalOvertime, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalOvertime, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Опоздания" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="SkyBlue" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalLate, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalLate, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Уходы раньше" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="LightPink" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalEarlyLeave, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalEarlyLeave, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Переработка по документу" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="LightYellow" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.Total_DocumentOvertime, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.Total_DocumentOvertime, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Явка по документу" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="LightGreen" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.Total_DocumentPresence, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.Total_DocumentPresence, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Неявка по документу" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="LightPink" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.Total_DocumentAbsence, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.Total_DocumentAbsence, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Вечером" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="DarkGreen" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalEavening, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalEavening, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Height="25">
                            <TextBlock Text="Ночью" VerticalAlignment="Center" Width="150" Margin="4 2" />
                            <Rectangle Fill="DarkGreen" Width="50" Margin="4 2" />
                            <TextBlock Text="{Binding DayTimeTrack.TotalNight, Converter={StaticResource TimeSpanToStringConverter}}" Foreground="{Binding DayTimeTrack.TotalNight, Converter={StaticResource TimeSpanToColorConverter}}" VerticalAlignment="Center" Margin="4 2" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>