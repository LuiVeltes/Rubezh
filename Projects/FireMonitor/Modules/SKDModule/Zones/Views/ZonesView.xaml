<UserControl x:Class="SKDModule.Views.ZonesView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:Controls="clr-namespace:Controls;assembly=Controls"
			 xmlns:sys="clr-namespace:System;assembly=mscorlib"
			 xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls"
			 xmlns:Views="clr-namespace:SKDModule.Views"
			 xmlns:viewModel="clr-namespace:SKDModule.ViewModels">

	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" MinWidth="200" />
			<ColumnDefinition Width="Auto" />
			<ColumnDefinition Width="*" MinWidth="200" />
		</Grid.ColumnDefinitions>
		<Grid Grid.Column="0" ScrollViewer.IsDeferredScrollingEnabled="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
			<DataGrid Name="_zonesDataGrid" Focusable="True" ItemsSource="{Binding Zones}" SelectedItem="{Binding SelectedZone}">
				<DataGrid.Columns>
					<DataGridTemplateColumn Header="Зона" Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image Source="{Binding State.StateClass, Converter={StaticResource XStateClassToIconConverter}}" Width="16" Height="16" VerticalAlignment="Center" />
									<Image Source="/Controls;component/Images/zone.png" VerticalAlignment="Center" Margin="1 0 0 0" />
									<TextBlock Text="{Binding Zone.Name}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Width="200">
											<TextBlock.ContextMenu>
												<ContextMenu>
													<Controls:IconedMenuItem ImageSource="/Controls;component/Images/BTurnOff.png" Text="Команда" Command="{Binding ZoneCommand}" />
													<Controls:IconedMenuItem ImageSource="/Controls;component/Images/map_black.png" Text="Показать на плане" Command="{Binding ShowOnPlanCommand}" />
													<Controls:IconedMenuItem ImageSource="/Controls;component/Images/BSettings.png" Text="Свойства" Command="{Binding ShowPropertiesCommand}" />
												</ContextMenu>
											</TextBlock.ContextMenu>
											<TextBlock.ToolTip>
												<StackPanel>
													<Image Source="/Controls;component/Images/zone.png" VerticalAlignment="Center" Margin="1 0 0 0" />
													<TextBlock Text="{Binding Zone.Name}" FontWeight="Bold" />
												</StackPanel>
											</TextBlock.ToolTip>
										</TextBlock>
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Binding="{Binding Zone.Description}" Header="Примечание" Width="*" />
				</DataGrid.Columns>
			</DataGrid>
		</Grid>
		<GridSplitter Grid.Column="1" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" Cursor="SizeWE" />
		<Grid Grid.Column="2" ScrollViewer.IsDeferredScrollingEnabled="True" VirtualizingStackPanel.VirtualizationMode="Recycling" Margin="4 0 0 0">
			<DataGrid ItemsSource="{Binding Devices}">
				<DataGrid.Columns>
					<DataGridTemplateColumn Header="Считыватель, ведущий в зону" Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image Width="16" Height="16" Margin="5, 0, 5, 0" Source="{Binding Device.Driver.ImageSource}" />
									<TextBlock Text="{Binding Device.Name}" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>

					<DataGridTemplateColumn Header="Контроллер" Width="Auto">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image Width="16" Height="16" Margin="5, 0, 5, 0" Source="{Binding Device.Parent.Driver.ImageSource}" />
									<TextBlock Text="{Binding Device.Parent.Name}" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</DataGrid>
		</Grid>
	</Grid>
</UserControl>