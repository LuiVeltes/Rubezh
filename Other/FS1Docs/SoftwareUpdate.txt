Для обновления ПО Прибора необходимо загрузить три прошивки по очереди, перезагружая между ними прибор командой 0x39
Есть три прошивки
- Загрузчик
- Прикладное ПО
- Прошивка AVR
Для начала нужно перевести прибор в RAM загрузчик из любого состояния, в котором он бы сейчас не находился бы.
Нужно проверить версии и CRC всех трех прошивок. Версии могут быть одинаковыми, а CRC разным
Проверять версию и CRC можно командой 0x37
У команды 0x37 могут быть подфункции 0x01, 0x02, 0x03 у всех и далее до 0x08, в зависимости от шлейфа. По одному AVR на каждые два шлейфа
Возвращает команда 4б. 2б - версия ПО + 2б CRC
0x01 Версия ПО
0x02 Версия Загрузчика
0x03 Версия AVR
0x04 Версия AVR
0x05 Версия AVR
0x06 Версия AVR
0x07 Версия AVR
0x08 Версия AVR
Загрузчиком занимался Алексей Киндеров. Он сейчас в отпуске.

Прошивки для 2ОП находятся в
\\fs02\NIO\-- АРХИВ --\2ОП\Сборка
R2OP_loader_v1.03_CRP.hex - Загрузчик
R2OP_R4A_BUNS_update_rs_v1.03_b1.hex - Загрузчик через RS484
R2OP_update_usb_v1.03_b1.hex - Загрузчик через USB
R4A_R2OP_v1_41_m88a.hex - Прошивка AVR
Rubezh_2OP.hex - Прикладное ПО

Вроде как просто загрузчик не используется, а используется либо второй либо третий файл, в зависимости от тогао, как прибор подключен - через МС или напрямую через USB. Это знает Алексей Киндеров
Для 2АМ прошивки находятся в
\\fs02\NIO\-- АРХИВ --\2АМ\Сборка